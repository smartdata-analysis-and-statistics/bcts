% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bayesNI-conj-calibrate.R
\name{bcts_power_betaBinom_conj}
\alias{bcts_power_betaBinom_conj}
\title{Bayesian trial power estimation with Beta–Binomial conjugate model}
\usage{
bcts_power_betaBinom_conj(
  B = 1000,
  p_c,
  p_t,
  n_c,
  n_t,
  M,
  threshold,
  prior = c("flat", "power"),
  prior_args = list(),
  n_draws = 2000,
  seed = NULL,
  show_progress = TRUE,
  conf.level = 0.95,
  ci_method = "wilson"
)
}
\arguments{
\item{B}{Integer. Number of simulated trials.}

\item{p_c, p_t}{Numeric in [0,1]. True response probabilities in control and treatment.}

\item{n_c, n_t}{Integers. Sample sizes in control and treatment.}

\item{M}{Numeric. Margin on the risk-difference scale.
\itemize{
\item Use negative values for non-inferiority,
\item Zero for equivalence,
\item Positive for superiority.
}}

\item{threshold}{Numeric in (0,1). Posterior probability cutoff \eqn{\gamma}.}

\item{prior}{Either \code{"flat"} (Beta(1,1) both arms) or \code{"power"} (power prior on control).}

\item{prior_args}{List of hyperparameters when \code{prior = "power"}:
\itemize{
\item \code{a0}: discount factor in \verb{[0,1]}
\item \code{y_0}, \code{n_0}: historical control responders and sample size
\item \code{a_base}, \code{b_base}: baseline Beta parameters (defaults \code{1}, \code{1})
}}

\item{n_draws}{Integer. Posterior Monte Carlo draws per trial (for \eqn{Pr()} evaluation).}

\item{seed}{Optional integer RNG seed.}

\item{show_progress}{Logical. Show a text progress bar.}

\item{conf.level}{Numeric in (0,1). Confidence level for binomial CI.}

\item{ci_method}{Character. CI method passed to \code{\link[binom:binom.confint]{binom::binom.confint()}}.}
}
\value{
A list with:
\itemize{
\item \code{estimate}: estimated success probability (power)
\item \code{ci}: matrix with lower/upper bounds for the CI
\item \code{B}: number of simulated trials
\item \code{decisions}: logical vector of trial-level NI declarations
}
}
\description{
Uses Monte Carlo simulation with conjugate Beta–Binomial updates
(no MCMC) to estimate the probability of declaring trial success
under user-specified assumptions. A trial is declared successful
if \eqn{Pr(\theta_t - \theta_c > M | data) \ge \gamma}.
}
\examples{
res <- bcts_power_betaBinom_conj(
  B = 100, p_c = 0.85, p_t = 0.85, n_c = 29, n_t = 29,
  M = -0.20, threshold = 0.90, prior = "flat", n_draws = 200, seed = 123
)
res$estimate
res$ci

}
\seealso{
\code{\link[=bcts_type1_betaBinom_conj]{bcts_type1_betaBinom_conj()}}, \code{\link[=bcts_calibrate_betaBinom_conj]{bcts_calibrate_betaBinom_conj()}}
}
