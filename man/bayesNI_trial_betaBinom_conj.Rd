% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bayesNI-conj-sim.R
\name{bayesNI_trial_betaBinom_conj}
\alias{bayesNI_trial_betaBinom_conj}
\title{Simulate one NI trial (Betaâ€“Binomial, conjugate)}
\usage{
bayesNI_trial_betaBinom_conj(
  p_c,
  p_t,
  n_c,
  n_t,
  M,
  prior = c("flat", "power"),
  prior_args = list(),
  n_draws = 2000,
  seed = NULL
)
}
\arguments{
\item{p_c, p_t}{Numeric in [0,1]. True response probabilities for control and treatment.}

\item{n_c, n_t}{Integers. Sample sizes for control and treatment.}

\item{M}{Numeric. NI margin on the risk-difference scale (e.g., \code{-0.20}).}

\item{prior}{Character. \code{"flat"} (Beta(1,1) both arms) or \code{"power"} (power prior on control).}

\item{prior_args}{List of hyperparameters when \code{prior = "power"}:
\itemize{
\item \code{a0}: discount factor in [0,1]
\item \code{y_0}, \code{n_0}: historical control responders and sample size
\item \code{a_base}, \code{b_base}: baseline Beta parameters (defaults \code{1}, \code{1})
}}

\item{n_draws}{Integer. Monte Carlo draws used to evaluate \code{Pr(NI)} from the two Beta posteriors.}

\item{seed}{Optional integer RNG seed for this single trial.}
}
\value{
A list with components:
\itemize{
\item \code{summary}: named numeric vector with
\itemize{
\item \code{post_prob_NI}: posterior probability of NI
\item \code{mean_theta_c}, \code{mean_theta_t}: posterior means of control/treatment
\item \code{y_c}, \code{y_t}: simulated successes
}
\item \code{shapes}: list of Beta shapes \verb{a_c,b_c,a_t,b_t} used for the posteriors
}
}
\description{
Simulates one two-arm non-inferiority trial with binomial outcomes, updates the
Beta posteriors by conjugacy (no MCMC), and returns the posterior probability
of non-inferiority \eqn{Pr(\theta_t - \theta_c > M \mid y)}.
}
\examples{
# \donttest{
set.seed(123)
out <- bayesNI_trial_betaBinom_conj(
  p_c = .85, p_t = .85, n_c = 29, n_t = 29, M = -0.20,
  prior = "flat", n_draws = 2000
)
out$summary["post_prob_NI"]
# }

}
\seealso{
\code{\link[=bayesNI_power_betaBinom_conj]{bayesNI_power_betaBinom_conj()}}, \code{\link[=bayesNI_type1_betaBinom_conj]{bayesNI_type1_betaBinom_conj()}},
\code{\link[=bayesNI_calibrate_betaBinom_conj]{bayesNI_calibrate_betaBinom_conj()}}
}
