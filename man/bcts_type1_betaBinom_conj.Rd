% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bayesNI-conj-calibrate.R
\name{bcts_type1_betaBinom_conj}
\alias{bcts_type1_betaBinom_conj}
\title{Empirical Type-I Error for Bayesian Trial (Beta-Binomial, conjugate)}
\usage{
bcts_type1_betaBinom_conj(
  B = 2000,
  p_c,
  M,
  n_c,
  n_t,
  threshold,
  prior = c("flat", "power"),
  prior_args = list(),
  n_draws = 2000,
  seeds = NULL,
  show_progress = TRUE,
  ci_method = c("wilson", "exact"),
  conf.level = 0.95
)
}
\arguments{
\item{B}{Integer. Number of simulated trials.}

\item{p_c}{Numeric in [0,1]. True response probability in the control arm.}

\item{M}{Numeric. Margin on the risk-difference scale. The LFN is defined as
\eqn{p_t = p_c + M}.}

\item{n_c, n_t}{Integers. Sample sizes in control and treatment arms.}

\item{threshold}{Numeric in (0,1). Posterior probability cutoff (gamma) for
declaring success.}

\item{prior}{Character. Either \code{"flat"} (Beta(1,1) prior for both arms) or
\code{"power"} (power prior on control arm); see \code{prior_args}.}

\item{prior_args}{List of hyperparameters if \code{prior = "power"}, including:
\itemize{
\item \code{a0}: discount factor in [0,1]
\item \code{y_0}, \code{n_0}: historical control responders and sample size
\item \code{a_base}, \code{b_base}: baseline Beta prior parameters
}}

\item{n_draws}{Integer. Posterior Monte Carlo draws per simulated trial.}

\item{seeds}{Optional integer vector of length \code{B}. If \code{NULL}, a default set
of random seeds is generated.}

\item{show_progress}{Logical. Display a text progress bar during simulation.}

\item{ci_method}{Character. Method for binomial confidence interval;
\code{"wilson"} (default) or \code{"exact"}. Requires the \pkg{binom} package if
\code{"exact"} is used.}

\item{conf.level}{Numeric in (0,1). Confidence level for the binomial CI
(default 0.95).}
}
\value{
A list with:
\itemize{
\item \code{type1}: estimated Type-I error
\item \code{mc_se}: Monte Carlo standard error
\item \code{mc_ci}: approximate 95\% MC confidence interval
\item \code{seeds}: vector of seeds actually used
\item \code{settings}: echo of key inputs, including the LFN \code{p_t}
}
}
\description{
Estimates the Type-I error rate for a Bayesian non-inferiority (or
superiority) test using conjugate Beta-Binomial updates. The test declares
success if the posterior probability \eqn{Pr(\theta_t - \theta_c > M | data)}
exceeds a fixed threshold \code{threshold}. Simulation is conducted under the
least-favourable null (LFN), where \eqn{p_t = p_c + M}.
}
\examples{
# Quick example (small B and n_draws for speed in testing)
bcts_type1_betaBinom_conj(
  B         = 50,
  p_c       = 0.85,
  M         = -0.20,
  n_c       = 29,
  n_t       = 29,
  threshold = 0.90,
  prior     = "flat",
  n_draws   = 200
)

}
\seealso{
\code{\link[=bcts_calibrate_betaBinom_conj]{bcts_calibrate_betaBinom_conj()}}, \code{\link[=bcts_power_betaBinom_conj]{bcts_power_betaBinom_conj()}}
}
\concept{conjugate-BetaBinom}
